# PA4-1-2 Process Schedule Hard Report

要求模拟一个进程调度器，支持动态修改进程的优先级，并计算每个进程运行结束的时刻。

主要思路：

- 使用大顶堆维护当前时刻的所有的进程，每次计算相邻两次修改操作的时间区间内的进程运行情况，如果运行完毕则直接弹出堆。
- 不维护每个进程在堆中的实际位置，而采用“惰性删除”或“延迟删除”策略。具体而言，堆内每个元素都有一个时间戳，在全局对每个进程维护一个最新的时间戳，每次修改优先级时向堆内插入一个新的进程（此时堆内可能存在多个进程号相同的元素），打上一个新的时间戳并更新全局时间戳。每次访问堆顶元素时需要检查时间戳是否和全局时间戳相同，不相同则直接删除。

代码实现的注意点：堆内每个元素都需要记录 rank，使用全局的 rank 会导致修改时堆内元素不满足堆的性质。

时间复杂度：$\mathcal O((n + m) \log (n + m))$

空间复杂度：$\mathcal O(n + m)$

---

困难和参考资料：无

用时：2h
